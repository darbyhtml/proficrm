# CHANGELOG — CRM ПРОФИ

## 2025‑12‑29 — Фоновые задачи, Redis и почтовые рассылки

- Добавлен Redis как брокер и кеш (rate limiting, Celery, кеширование).
- Настроен Celery worker и Celery Beat для фоновых задач.
- Перенесён `mailer_worker` в Celery task `mailer.tasks.send_pending_emails`.
- Добавлена периодическая очистка старых `CallRequest` через Celery.
- Реализован health‑check `/health/` (БД, кеш, Celery).
- Настроено логирование в `logs/crm.log` и консоль контейнера.
- Улучшен раздел «Почта»: группировка по компаниям, массовое удаление, фильтры.
- Добавлен раздел «Помощь» в UI с заглушкой под обучающие материалы.

## 2025‑12‑26 — Безопасность и индексация

- Добавлен `security.txt` с email для сообщений об уязвимостях.
- Закрыта индексация CRM: `robots.txt` + meta `noindex`.
- Добавлен CSP и Permissions‑Policy через middleware.
- Реализованы rate limiting и блокировка аккаунта при брутфорсе.
- Усилены настройки сессий и паролей.

## 2025‑12‑20 — Телефония и аналитика звонков

- Расширена модель `CallRequest` полями статуса, времени и длительности.
- Настроена интеграция c Android‑приложением (MVP «Позвонить с телефона»).
- Добавлена аналитика звонков с цветовой индикацией статусов.

## 2025‑12‑18 — Номера телефонов и компания/контакты

- Введён единый формат телефонов `+7 (XXX) XXX-XX-XX` в UI.
- Нормализация телефонов при сохранении в БД (+7XXXXXXXXXX).
- Исправлена обработка номеров вида `+78XXXXXXXXX`.

## 2025‑12‑16 — Задачи, дубликаты и пагинация

- Добавлена массовая смена ответственного по задачам (админы).
- Унифицирована пагинация (25/50/100/200) в списках и аналитике.
- Улучшен поиск и подсветка дублей компаний.

---

# Отчет о проделанной работе — ранние этапы


