{# Бейдж статуса задачи: иконка + название с цветом из TaskType.color #}
{% load static %}
{% with tt=task_type %}
  {% if not tt %}
    <span class="inline-flex items-center gap-1 text-xs px-2 py-0.5 rounded-full bg-gray-100 text-gray-700">Без статуса</span>
  {% else %}
    {% with color=tt.color|default:"badge-gray" icon=tt.icon|default:"" %}
      <span class="inline-flex items-center gap-1 text-xs px-2 py-0.5 rounded-full
        {% if color == 'badge-blue' %}bg-blue-100 text-blue-800
        {% elif color == 'badge-green' %}bg-green-100 text-green-800
        {% elif color == 'badge-red' %}bg-red-100 text-red-800
        {% elif color == 'badge-amber' %}bg-amber-100 text-amber-800
        {% elif color == 'badge-orange' %}bg-orange-100 text-orange-800
        {% elif color == 'badge-teal' %}bg-teal-100 text-teal-800
        {% elif color == 'badge-indigo' %}bg-indigo-100 text-indigo-800
        {% elif color == 'badge-purple' %}bg-purple-100 text-purple-800
        {% elif color == 'badge-pink' %}bg-pink-100 text-pink-800
        {% elif color == 'badge-gray' %}bg-gray-100 text-gray-800
        {% else %}bg-gray-100 text-gray-800{% endif %}
      ">
        {% if icon %}
          <span class="inline-flex items-center justify-center w-3.5 h-3.5">
            {% if icon == 'phone' %}
              <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M22 16.9v3a2 2 0 0 1-2.2 2 19.8 19.8 0 0 1-8.6-3.1 19.5 19.5 0 0 1-6-6A19.8 19.8 0 0 1 2.1 4.2 2 2 0 0 1 4.1 2h3a2 2 0 0 1 2 1.7c.1.9.3 1.8.6 2.6a2 2 0 0 1-.5 2.1L8 9.9a16 16 0 0 0 6 6l1.5-1.2a2 2 0 0 1 2.1-.5c.8.3 1.7.5 2.6.6a2 2 0 0 1 1.8 2.1z"/>
              </svg>
            {% elif icon == 'mail' %}
              <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M4 4h16v16H4z"/><path d="M4 7l8 5 8-5"/>
              </svg>
            {% elif icon == 'document' %}
              <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M7 2h8l4 4v16H7z"/><path d="M15 2v4h4"/>
              </svg>
            {% elif icon == 'calendar' %}
              <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/>
              </svg>
            {% elif icon == 'question' %}
              <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 17h.01"/><path d="M9.1 9a3 3 0 0 1 5.8 1c0 2-2 2.5-2 4"/>
                <circle cx="12" cy="12" r="9"/>
              </svg>
            {% elif icon == 'alert' %}
              <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M12 8v5"/><path d="M12 16h.01"/><path d="M4.5 19h15L12 4z"/>
              </svg>
            {% elif icon == 'education' %}
              <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M4 10l8-4 8 4-8 4-8-4z"/><path d="M6 12v4l6 3 6-3v-4"/>
              </svg>
            {% elif icon == 'send' %}
              <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M4 4l16 8-16 8 4-8-4-8z"/>
              </svg>
            {% elif icon == 'check' %}
              <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M5 13l4 4L19 7"/>
              </svg>
            {% elif icon == 'clock' %}
              <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="9"/><path d="M12 7v5l3 3"/>
              </svg>
            {% elif icon == 'repeat' %}
              <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M4 4h9a4 4 0 014 4v1"/><path d="M9 20H4a4 4 0 01-4-4v-1"/><path d="M8 4L4 0 0 4"/><path d="M16 24l4-4 4 4"/>
              </svg>
            {% elif icon == 'target' %}
              <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="9"/><circle cx="12" cy="12" r="5"/><circle cx="12" cy="12" r="2"/>
              </svg>
            {% elif icon == 'user' %}
              <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="8" r="4"/><path d="M4 20a8 8 0 0116 0"/>
              </svg>
            {% elif icon == 'team' %}
              <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="8" cy="9" r="3"/><circle cx="16" cy="9" r="3"/><path d="M2 20a6 6 0 0112 0"/><path d="M10 20a6 6 0 0112 0"/>
              </svg>
            {% elif icon == 'money' %}
              <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="5" width="18" height="14" rx="2"/><circle cx="12" cy="12" r="3"/>
              </svg>
            {% elif icon == 'cart' %}
              <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="9" cy="21" r="1"/><circle cx="19" cy="21" r="1"/><path d="M3 3h2l3 12h11l2-8H8"/>
              </svg>
            {% elif icon == 'chat' %}
              <svg viewBox="0 0 24 24" width="14" height="14" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M4 5h16v10H5l-3 3V5z"/>
              </svg>
            {% elif icon == 'star' %}
              <svg viewBox="0 0 24 24" width="14" height="14" fill="currentColor" stroke="none">
                <path d="M12 2.5l2.9 5.9 6.6.9-4.8 4.7 1.1 6.5L12 17.8 6.2 20.5l1.1-6.5-4.8-4.7 6.6-.9z"/>
              </svg>
            {% endif %}
          </span>
        {% endif %}
        <span>{{ tt.name }}</span>
      </span>
    {% endwith %}
  {% endif %}
{% endwith %}

