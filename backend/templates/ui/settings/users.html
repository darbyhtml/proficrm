{% extends "ui/base.html" %}
{% block title %}Пользователи — CRM ПРОФИ{% endblock %}

{% block content %}
  <div class="space-y-4">
    <div class="flex items-end justify-between gap-3">
      <div>
        <div class="text-sm text-brand-dark/70"><a class="underline" href="/settings/">Настройки</a> /</div>
        <h1 class="text-2xl font-semibold">Пользователи</h1>
      </div>
      <a href="/settings/users/new/" class="rounded-lg bg-brand-teal text-white px-3 py-2 text-sm hover:bg-brand-dark">+ Добавить пользователя</a>
    </div>

    <div class="bg-white border rounded-2xl overflow-hidden">
      <table class="min-w-full text-sm">
        <thead class="bg-brand-soft/40 text-brand-dark/80">
          <tr>
            <th class="text-left px-4 py-3">Логин</th>
            <th class="text-left px-4 py-3">ФИО</th>
            <th class="text-left px-4 py-3">Роль</th>
            <th class="text-left px-4 py-3">Филиал</th>
            <th class="text-left px-4 py-3">Активен</th>
            <th class="text-left px-4 py-3">Действия</th>
          </tr>
        </thead>
        <tbody>
          {% for u in users %}
            <tr class="border-t">
              <td class="px-4 py-3 font-mono">{{ u.username }}</td>
              <td class="px-4 py-3">{{ u.get_full_name|default:"—" }}</td>
              <td class="px-4 py-3">{{ u.get_role_display }}</td>
              <td class="px-4 py-3">{{ u.branch|default:"—" }}</td>
              <td class="px-4 py-3">{% if u.is_active %}Да{% else %}Нет{% endif %}</td>
              <td class="px-4 py-3">
                <a class="underline" href="/settings/users/{{ u.id }}/edit/">Редактировать</a>
              </td>
            </tr>
          {% empty %}
            <tr><td class="px-4 py-6 text-brand-dark/70" colspan="6">Пользователей нет.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
{% endblock %}


