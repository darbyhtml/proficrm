# Рекомендации по дальнейшему улучшению — CRM Profi Dialer

После приведения проекта к лучшим практикам (коммит 618ca5b) ниже — приоритизированный список следующих шагов.

---

## 1. Финальный прогон через Android Vitals и Play Console

- [ ] Проверить **ANR rate**, **startup time**, **excessive wakeups** в отчётах Play Console.
- [ ] Внедрить **baseline profiles** (если ещё не используются) для ускорения холодного старта и снижения трафика при первом запуске.

---

## 2. Унификация логирования

- [ ] Перевести оставшиеся вызовы `Log.w()` / `Log.e()` на **AppLogger** в:
  - `TokenManager`
  - `CrashLogStore`
  - `LogSender`
  - `QueueManager`
  - `CallListenerService` (где остался `android.util.Log`)
- Цель: централизованный контроль, маскирование и отключение DEBUG/VERBOSE в release.

---

## 3. Модульное покрытие тестами

- [ ] **Unit-тесты**: ApiClient (моки OkHttp), QueueManager, TokenManager (мок Context/prefs), CrashLogStore.
- [ ] **Instrumented / интеграционные**: CallListenerService (запуск, остановка, обработка intent), сценарии навигации.
- Упростит рефакторинг и CI/CD.

---

## 4. Jetpack Compose (поэтапно)

- [ ] При планах модернизации UI начать с экранов без сложной логики:
  - Onboarding
  - Экран логов / диагностики
- Дальше — экраны входа и главный экран.

---

## 5. Метрики и аналитика

- [ ] Подключить **Firebase Performance** и **Crashlytics** (если ещё не используются).
- [ ] Настроить baseline-события по ключевым действиям:
  - нажатие кнопки Login;
  - успешный QR login;
  - первый звонок после получения команды;
  - отправка телеметрии при 429/401.

---

## 6. Retry-стратегии для сети

- [ ] **flushTelemetry()** и отправка логов: добавить экспоненциальный retry с backoff при нестабильном интернете (например, 1–2 повтора с задержкой 2–5 с перед отказом или постановкой в очередь).
- Снизит потерю телеметрии и логов при кратковременных сбоях сети.

---

*Документ можно использовать как чек-лист при планировании спринтов или онбординге новых разработчиков.*
