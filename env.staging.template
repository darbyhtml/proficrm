# Django Core Settings
# Generate a strong secret key: python -c "import secrets; print(secrets.token_urlsafe(50))"
DJANGO_SECRET_KEY=CHANGE_ME_GENERATE_STRONG_KEY
DJANGO_DEBUG=0
# Staging-поддомен (прод — crm.groupprofi.ru). Добавьте A-запись crm-staging.groupprofi.ru → IP сервера.
DJANGO_ALLOWED_HOSTS=crm-staging.groupprofi.ru,5.181.254.172,localhost,127.0.0.1
DJANGO_CSRF_TRUSTED_ORIGINS=https://crm-staging.groupprofi.ru,http://crm-staging.groupprofi.ru,http://5.181.254.172

# Production security (для staging без HTTPS можно оставить 0; при включении certbot — 1)
DJANGO_SECURE_SSL_REDIRECT=0
DJANGO_SESSION_COOKIE_SECURE=0
DJANGO_CSRF_COOKIE_SECURE=0
DJANGO_SECURE_HSTS_SECONDS=0
DJANGO_SECURE_HSTS_INCLUDE_SUBDOMAINS=0
DJANGO_SECURE_HSTS_PRELOAD=0

# Localization
DJANGO_LANGUAGE_CODE=ru-ru
DJANGO_TIME_ZONE=Europe/Moscow

# Database
DB_ENGINE=postgres

# PostgreSQL settings (для staging)
POSTGRES_DB=crm_staging
POSTGRES_USER=crm_staging
POSTGRES_PASSWORD=CHANGE_ME_STRONG_PASSWORD
POSTGRES_HOST=db
POSTGRES_PORT=5432

# File Upload Limits (в байтах, по умолчанию: 20MB)
DJANGO_DATA_UPLOAD_MAX_MEMORY_SIZE=20971520
DJANGO_FILE_UPLOAD_MAX_MEMORY_SIZE=20971520

# Mailer (email) - для staging отключаем реальную отправку
# Generate once: python -c "from cryptography.fernet import Fernet; print(Fernet.generate_key().decode())"
MAILER_FERNET_KEY=CHANGE_ME_GENERATE_FERNET_KEY
# Для staging: не отправляем реальные письма. URL — поддомен, чтобы не путать с продом.
# Без HTTPS пока используйте: PUBLIC_BASE_URL=http://crm-staging.groupprofi.ru
PUBLIC_BASE_URL=https://crm-staging.groupprofi.ru

# Security Contact Email (для security.txt)
SECURITY_CONTACT_EMAIL=security@example.com

# CORS (если используется отдельный frontend)
CORS_ALLOWED_ORIGINS=

# Redis (Cache & Celery)
REDIS_URL=redis://redis:6379/0

# Celery
CELERY_BROKER_URL=redis://redis:6379/1
CELERY_RESULT_BACKEND=redis://redis:6379/2

# Proxy IPs (для X-Forwarded-For валидации)
# Если Nginx в контейнере, то IP контейнера nginx (можно оставить пустым для staging)
DJANGO_PROXY_IPS=

# Поиск (Typesense, опционально)
# SEARCH_ENGINE_BACKEND=postgres
# SEARCH_ENGINE_BACKEND=typesense
# TYPESENSE_HOST=typesense
# TYPESENSE_PORT=8108
# TYPESENSE_PROTOCOL=http
# TYPESENSE_API_KEY=xyz
# После включения typesense: docker compose exec web python manage.py index_companies_typesense
